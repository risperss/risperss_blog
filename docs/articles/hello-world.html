<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <!-- Display title (if it exists) -->
        <title>
            YOCaml examples/simple-blog- Hello World</title>
        <!-- We iterate over the metatags calculated to display them --><meta name="description" content="A fun article about a riddle I liked, with solution." /><meta name="keywords" content="prisoner, switch" /><meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- We use Google font to load the typography, which is a bit sad,
         but it avoids making the repo code too long for an example. -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
            rel="stylesheet"
        />
        <!-- Specific CSS stylesheets -->
        <link rel="stylesheet" href="/css/reset.css" />
        <link rel="stylesheet" href="/css/style.css" />
    </head>
    <body>
        <div class="layout">
            <header>
                <h1 class="slab">A simple blog</h1>
                <h2 class="slab">
                    An example of a personal blog built with YOCaml
                </h2>
                <nav>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/about.html">About</a></li>
                        <li><a href="/links.html">Links</a></li>
                        <li><a class="feed" href="/rss1.xml">RSS1</a></li>
                        <li><a class="feed" href="/rss2.xml">RSS2</a></li>
                        <li><a class="feed" href="/atom.xml">ATOM</a></li>
                    </ul>
                </nav>
            </header>
            <main><div class="article-header">
    <div>
        <div class="mono date">
            <div class="year">2025</div>
            <div class="day">28</div>
            <div class="month">aug</div>
        </div>
    </div>
    <div>
        <h3 class="slab">Hello World</h3><div class="article-synopsis">A fun article about a riddle I liked, with solution.</div><ul class="mono tags"><li>prisoner</li><li>switch</li></ul>
    </div>
</div>

<article><h2 id="the-riddle">The riddle</h2>
<p>I found this riddle <a href="https://www.tcm.phy.cam.ac.uk/~sea31/puzzle.html">here</a>,
which is a nice site containing lots of fun riddles. This article will go over
problem 2, which in case that link breaks, is included below.</p>
<blockquote>
<p>24 convicts are being transported together to a special prison, in which they
will spend the rest of their life, each in solitary confinement. However they
know that they have one last chance of securing freedom if they solve the
following puzzle: At random intervals (on average much shorter than the
prisoner's lifespan!), a randomly selected prisoner will be led to a room which
is completely bare and only contains two switches with two positions each. On
every visit exactly one of the switches must be switched exactly once but the
visiting prisoner is free to choose which one he wants to switch. When a
prisoner can tell that all prisoners have been in this room at least once, all
are set free. What strategy should they agree on before being separated upon
arrival at the prison?</p>
</blockquote>
<h2 id="an-aside-about-this-page-blog">An aside about this page/blog</h2>
<p>Feel free to give this riddle a try. I did not invent this riddle, nor do I know
anything fundamental about this kind of problem that would allow me to provide
some generalizible mathematical explanation. I just though of a solution and
wanted to add collapsible hint and solution sections to articles in YOCaml
without any JavaScript.</p>
<p>As it turns out, including a <code>&lt;details&gt;</code> tag in Markdown does this automatically.
So much for my side quest. All the below section took was this snippet of code.</p>
<pre><code class="language-html">&lt;details&gt;
    &lt;summary&gt;Collapse / Expand&lt;/summary&gt;
    Foo bar
&lt;/details&gt;
</code></pre>
<h3 id="a-simple-collapsible-section">A simple collapsible section</h3>
<details>
    <summary>Collapse / Expand</summary>
    Foo bar
</details>
<h2 id="hints">Hints</h2>
<p>If you are stuck on this riddle, here are some hints.</p>
<details>
    <summary>Hint #1</summary>
    It might be useful to thing of the state of the switches as four nodes connected in a square,
    like this.
<pre><code>A ---- B
|      |
|      |
D ---- C
</code></pre>
</details>
<details>
    <summary>Hint #2</summary>
    A prisoner must be able to tell that all prisoners have been in this room at least once.
    It does not specify how many must be able to tell.
</details>
<details>
    <summary>Hint #3</summary>
    The solution will work for an arbitrary number of prisoners. The number 24 is a red herring.
</details>
<h2 id="solution">Solution</h2>
<p><a href="https://www.tcm.phy.cam.ac.uk/~sea31/sol2.htm">Here</a> is OP's solution, included below in case of broken links.</p>
<details>
    <summary>OP's Solution</summary>
    Call the switches A and B (where the prisoners agree a way of distinguishing the switches unambiguously). One particular prisoner is designated to operate as follows: Every time he finds the A switch in the 'down' position he switches it 'up' and counts these occurrences. If he finds it in the 'up' position, he switches the B switch (regardless of its position). All others operate on the switches as follows: If they find switch A in the 'up' position, they switch it to 'down'. However, if they have already operated on switch A twice before in this manner, or if they find it 'down', they switch the other switch, B once (regardless of its position). When the one designated prisoner operating only on switch A has counted 47 occurrences of switch A being in the down position he knows that all have been in the room at least once.
</details>
<details>
    <summary>My Solution</summary>
<pre><code>A ---- B
|      |
|      |
D ---- C

We can imagine the switches as this graph. It has four distinct states, and only allows accessing two other states from a given state.
For this explanation, let A and B may be called the top positions, and C and D may be called the bottom positions.

The strategy they agree on is to designate one prisoner as the &quot;counter&quot; and all other prisoners as the &quot;others&quot;. Here are the rules they specify:
- if the counter finds the state in the bottom positions, keep the state in the bottom positions (by performing either C -&gt; D or D -&gt; C).
- if an other find the state in the top positions, keep the state in the top positions (by performing either A -&gt; B or B -&gt; A).
- if the counter finds the state in the top positions, move the state to the bottom positions (by performing either A -&gt; D or B -&gt; C)
- if the other finds the state in the bottom positions:
  - if they have _never_ before moved the state to the top positions, move the state to the top positions (by performing either D -&gt; A or C -&gt; D).
  - if they _have_ moved the state to the top positions, keep the state in the bottom positions (by performing either C -&gt; D or D -&gt; C).
</code></pre>
<p>The intuition here is that only an &quot;other&quot; who has never done so before may move the switch to the top position, so each time the counter sees this, he's certain a unique person has entered the room.</p>
<p>This assumes the switches start in the bottom positions. I'll think more about what it looks like for arbitrary start positions.</p>
</details>
</article>
</main>
            <footer>
                This blog is written using
                <a href="https://github.com/xhtmlboi/yocaml">YOCaml</a>.
            </footer>
        </div>
    </body>
</html>
